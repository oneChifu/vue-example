(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fda5bd48"],{"99af":function(e,t,r){"use strict";var n=r("23e7"),a=r("d039"),s=r("e8b5"),i=r("861d"),c=r("7b0b"),u=r("50c4"),o=r("8418"),d=r("65f0"),l=r("1dde"),f=r("b622"),b=r("2d00"),h=f("isConcatSpreadable"),p=9007199254740991,k="Maximum allowed index exceeded",m=b>=51||!a((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),v=l("concat"),g=function(e){if(!i(e))return!1;var t=e[h];return void 0!==t?!!t:s(e)},w=!m||!v;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,r,n,a,s,i=c(this),l=d(i,0),f=0;for(t=-1,n=arguments.length;t<n;t++)if(s=-1===t?i:arguments[t],g(s)){if(a=u(s.length),f+a>p)throw TypeError(k);for(r=0;r<a;r++,f++)r in s&&o(l,f,s[r])}else{if(f>=p)throw TypeError(k);o(l,f++,s)}return l.length=f,l}})},ed81:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",{staticClass:"display-4"},[e._v(e._s(e.$t("users-list")))]),r("b-row",e._l(e.users,(function(t,n){return e.checkCurrentUser(n)?e._e():r("UserCard",{key:n,attrs:{card:t,uid:n},on:{"set-like":e.setLike,"remove-like":e.removeLike}})})),1)],1)},a=[],s=(r("99af"),r("ade3")),i=r("5530"),c=(r("96cf"),r("1da1")),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("b-col",{attrs:{cols:"6"}},[r("b-card",{staticClass:"mt-4",attrs:{title:e.card.info.name}},[r("b-card-text",[e._v(e._s(e.card.info.plan?e.$t("plan")+": "+e.card.info.plan:e.$t("plan-empty")))]),r("div",{staticClass:"d-flex align-items-center"},[e.user.loggedIn?r("div",[e.checkLike()?r("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.$emit("remove-like",e.uid)}}},[r("b-icon-heart-fill")],1):r("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return e.$emit("set-like",e.uid)}}},[r("b-icon-heart")],1)],1):e._e(),r("span",{staticClass:"ml-auto text-right"},[e._v(e._s(e.$t("likes"))+": "+e._s(e.card.likes?Object.keys(e.card.likes).length:0))])])],1)],1)},o=[],d=r("2f62"),l={name:"user-card",data:function(){return{}},props:{uid:{type:String,required:!0},card:{type:Object,required:!0}},mounted:function(){console.log("userCard",this.card)},methods:{checkLike:function(){return this.card.likes&&this.card.likes[this.user.data.uid]}},computed:Object(i["a"])({},Object(d["b"])({user:"user"}))},f=l,b=r("2877"),h=Object(b["a"])(f,u,o,!1,null,null,null),p=h.exports,k=r("8aa5"),m=r.n(k),v={name:"users",data:function(){return{users:{},loading:!0}},components:{UserCard:p},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getUsers();case 2:e.users=t.sent,e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},computed:Object(i["a"])({},Object(d["b"])({user:"user"})),methods:{getUsers:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:m.a.database().ref("/users").once("value",(function(t){e.users=t.val()}));case 1:case"end":return t.stop()}}),t)})))()},setLike:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.user.loggedIn){r.next=4;break}t.$router.push("login"),r.next=7;break;case 4:return r.next=6,m.a.database().ref("/users/".concat(e,"/likes")).update(Object(s["a"])({},t.user.data.uid,!0));case 6:t.users[e]=Object.assign({},t.users[e],{likes:Object.assign({},t.users[e].likes,Object(s["a"])({},t.user.data.uid,!0))});case 7:case"end":return r.stop()}}),r)})))()},removeLike:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,m.a.database().ref("/users/".concat(e,"/likes/").concat(t.user.data.uid)).remove();case 2:t.$delete(t.users[e].likes,t.user.data.uid);case 3:case"end":return r.stop()}}),r)})))()},checkCurrentUser:function(e){return this.user.loggedIn&&this.user.data.uid==e}}},g=v,w=Object(b["a"])(g,n,a,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=chunk-fda5bd48.21639726.js.map